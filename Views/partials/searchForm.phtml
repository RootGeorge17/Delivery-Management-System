<?php if ($_SESSION['user']['currentTable'] == "Deliveries"): ?>
    <!-- Search form -->
    <div class="flex-grow-1">
        <form action="/" method="POST">
            <input type="hidden" name="_method" value="SEARCH">
            <div class="input-group">
                <input type="text" class="form-control" id="searchInputDeliveries" name="search" placeholder="Search for Parcel">
                <div class="input-group-append">
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            Filter Search by..
                        </button>
                        <div class="dropdown-menu" aria-labelledby="filterDropdown">
                            <div class="dropdown-item">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="id" id="filterId">
                                    <label class="form-check-label" for="filterId">
                                        ID
                                    </label>
                                </div>
                            </div>
                            <div class="dropdown-item">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="recipientName" id="filterRecipientName">
                                    <label class="form-check-label" for="filterRecipientName">
                                        Recipient Name
                                    </label>
                                </div>
                            </div>
                            <div class="dropdown-item">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="postcode" id="filterPostcode">
                                    <label class="form-check-label" for="filterPostcode">
                                        Postcode
                                    </label>
                                </div>
                            </div>
                            <div class="dropdown-item">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="address" id="filterAddress">
                                    <label class="form-check-label" for="filterAddress">
                                        Address
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
<?php endif; ?>

<?php if ($_SESSION['user']['currentTable'] == "Users"): ?>
    <div class="flex-grow-1">
        <form action="/" method="POST">
            <input type="hidden" name="_method" value="SEARCH">
            <div class="input-group">
                <input type="text" class="form-control" id="searchInputUsers" name="search" placeholder="Search for Parcel">
                <div class="input-group-append">
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            Filter Search by..
                        </button>
                        <div class="dropdown-menu" aria-labelledby="filterDropdown">
                            <div class="dropdown-item">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="id" id="filterId">
                                    <label class="form-check-label" for="filterId">
                                        ID
                                    </label>
                                </div>
                            </div>
                            <div class="dropdown-item">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="id" id="filterId">
                                    <label class="form-check-label" for="filterId">
                                        Username
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
<?php endif; ?>

<script>
    const searchInputDeliveries = document.getElementById('searchInputDeliveries');
    const resultsDeliveries = document.getElementById('resultsDeliveries');
    const filterCheckboxes = document.querySelectorAll('.dropdown-menu .form-check-input');

    searchInputDeliveries.addEventListener('input', () => {
        const searchTerm = searchInputDeliveries.value.trim().toLowerCase();
        const activeFilters = Array.from(filterCheckboxes)
            .filter(checkbox => checkbox.checked)
            .map(checkbox => checkbox.value);
        resultsDeliveries.innerHTML = '';
        // Perform your search and filtering logic here based on searchTerm and activeFilters
    });

    filterCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            const searchTerm = searchInputDeliveries.value.trim().toLowerCase();
            const activeFilters = Array.from(filterCheckboxes)
                .filter(checkbox => checkbox.checked)
                .map(checkbox => checkbox.value);
            resultsDeliveries.innerHTML = '';
            // Perform your search and filtering logic here based on searchTerm and activeFilters
        });
    });
</script>